<!DOCTYPE HTML>
<html>
	<head>  
		<meta charset="utf-8">
		 <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
	</head>
	<body>
		<script>
				var m = [
				{
			  text: 'Животные',
			  children: [
				{
				  text: 'Млекопитающие',
				  children: [
					{ text: 'Коровы' },
					{ text: 'Ослы' },
					{ text: 'Собаки' },
					{ text: 'Тигры' },
				  ]
				},
				{
				  text: 'Другие',
				  children: [
					{ text: 'Змеи' },
					{ text: 'Птицы' },
					{ text: 'Ящерицы' },
				  ]
				},
			  ]
			},
			{
			  text: 'Рыбы',
			  children: [
				{
				  text: 'Аквариумные',
				  children: [
					{ text: 'Гуппи' },
					{ text: 'Скалярии' },
				  ]
				},
				{
				  text: 'Морские',
				  children: [
					{ text: 'Морская форель' },
				  ]
				},
			  ]
			},
		  ];
			function createList( array){
				var html='<ul>';
				$.each( array, function(k, item){
					var li='<li>';
					html+=li+item.text;
					if( item.children){
						html+=createList(item.children);
					}
					html+='</li>';
					
				});
				 html+='</ul>';
				return html;
			}
			$('body').html( createList( m));
			$(document).ready(function () {
				$('ul > li').click(function (event) {
					$(this).children("ul").slideToggle();
					event.stopPropagation();
				});
			});
			$('li').each(function(){ 
			 $(this.firstElementChild).slideToggle();
                    console.log(this.firstChild.data, $(this).find("li").length);
                    
                })
                
			
		</script>
</body>
</html>